# Задание 1
#### 4. Инициализируйте проект, выполните код. Исправьте намеренное допущенные ошибки. Ответьте в чем заключается их суть?
>error: code = InvalidArgument desc = the specified number of cores is not available on platform "standard-v1"; allowed core number: 2, 4
#### 5. Ответьте, как в процессе обучения могут пригодиться параметры preemptible = true и core_fraction=5 в параметрах ВМ? Ответ в документации Yandex cloud.
> Экономия средств если не требуется доступность 24/7 (и допустимы ребуты раз в 24 часа) и приложение не грузит CPU на 100%   
#### В качестве решения приложите:  
<img width="1366" alt="image" src="https://github.com/nehardcore/terraform/assets/97674120/847a2021-940e-43ba-8a91-23a45a0b8d14">  

<img width="575" alt="image" src="https://github.com/nehardcore/terraform/assets/97674120/3db06dde-a1c0-47fd-bf6e-a3542139aedc">  

# Задание 4
Объявите в файле outputs.tf output типа map, содержащий { instance_name = external_ip } для каждой из ВМ.
Примените изменения.
В качестве решения приложите вывод значений ip-адресов команды terraform output  

<img width="489" alt="image" src="https://github.com/nehardcore/terraform/assets/97674120/d559d307-75cd-4557-834b-5acb314df9c1">

# Задание 5
В файле locals.tf опишите в одном local-блоке имя каждой ВМ, используйте интерполяцию ${..} с несколькими переменными по примеру из лекции.  
Замените переменные с именами ВМ из файла variables.tf на созданные вами local переменные.  

<img width="452" alt="image" src="https://github.com/nehardcore/terraform/assets/97674120/13a27a5e-3672-4d27-ba92-ba7c503c2483">

# Задание 6
Вместо использования 3-х переменных ".._cores",".._memory",".._core_fraction" в блоке resources {...}, объедените их в переменные типа map с именами "vm_web_resources" и "vm_db_resources".
```
variable "vm_db_resources" {
  type = map(number)
  default = {
    cores = 2
    memory = 2
    core_fraction = 20
  }  
}
```
Так же поступите с блоком metadata {serial-port-enable, ssh-keys}, эта переменная должна быть общая для всех ваших ВМ.
Найдите и удалите все более не используемые переменные проекта.  
```
variable "vm_metadata" {
  type = map
  default = {
    serial-port-enable = 1
    ssh-keys = "ubuntu:ssh-ed25519 ***"
  }
}
```

# Задание 7

Напишите, какой командой можно отобразить второй элемент списка test_list?  
> local.test_list[1]  

Найдите длину списка test_list с помощью функции length(<имя переменной>)  
> local.length(test_list)    

Напишите, какой командой можно отобразить значение ключа admin из map test_map ?  
> local.test_map.admin  

Напишите interpolation выражение, результатом которого будет: "John is admin for production server based on OS ubuntu-20-04 with X vcpu, Y ram and Z virtual disks", используйте данные из переменных test_list, test_map, servers и функцию length() для подстановки значений.
> <img width="958" alt="image" src="https://github.com/nehardcore/terraform/assets/97674120/917c811e-a760-4046-bb06-534d026a0ba3">
